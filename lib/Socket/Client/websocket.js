var __importDefault=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{"default":a}};Object.defineProperty(exports,"__esModule",{value:!0});exports.WebSocketClient=void 0;const ws_1=__importDefault(require("ws")),Defaults_1=require("../../Defaults"),types_1=require("./types");
class WebSocketClient extends types_1.AbstractSocketClient{constructor(){super(...arguments);this.socket=null}get isOpen(){var a;return(null===(a=this.socket)||void 0===a?void 0:a.readyState)===ws_1.default.OPEN}get isClosed(){var a;return null===this.socket||(null===(a=this.socket)||void 0===a?void 0:a.readyState)===ws_1.default.CLOSED}get isClosing(){var a;return null===this.socket||(null===(a=this.socket)||void 0===a?void 0:a.readyState)===ws_1.default.CLOSING}get isConnecting(){var a;return(null===
(a=this.socket)||void 0===a?void 0:a.readyState)===ws_1.default.CONNECTING}async connect(){var a,c;if(!this.socket){this.socket=new ws_1.default(this.url,{origin:Defaults_1.DEFAULT_ORIGIN,headers:null===(a=this.config.options)||void 0===a?void 0:a.headers,handshakeTimeout:this.config.connectTimeoutMs,timeout:this.config.connectTimeoutMs,agent:this.config.agent});this.socket.setMaxListeners(0);a="close error upgrade message open ping pong unexpected-response".split(" ");for(const b of a)null===(c=
this.socket)||void 0===c||c.on(b,(...d)=>this.emit(b,...d))}}async close(){this.socket&&(this.socket.close(),this.socket=null)}send(a,c){var b;null===(b=this.socket)||void 0===b||b.send(a,c);return!!this.socket}}exports.WebSocketClient=WebSocketClient;
