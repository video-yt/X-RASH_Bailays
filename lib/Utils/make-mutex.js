Object.defineProperty(exports,"__esModule",{value:!0});exports.makeKeyedMutex=exports.makeMutex=void 0;const makeMutex=()=>{let a=Promise.resolve();return{mutex(b){return a=(async()=>{try{await a}catch(c){}try{return await b()}finally{clearTimeout(void 0)}})()}}};exports.makeMutex=makeMutex;const makeKeyedMutex=()=>{const a={};return{mutex(b,c){a[b]||(a[b]=(0,exports.makeMutex)());return a[b].mutex(c)}}};exports.makeKeyedMutex=makeKeyedMutex;
